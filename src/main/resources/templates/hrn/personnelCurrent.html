<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <th:block layout:fragment="style">
        <link rel="stylesheet" th:href="@{/personnel/css/personnel_current.css}" />
    </th:block>
</head>
<body>
<th:block layout:fragment="content">
    <div class="container-fluid">
        <div class="container-fluid">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h4 class="m-0 font-weight-bold text-primary">인사현황</h4>
                </div>
                <div class="card-body">
                    <!-- 검색 및 entries 선택 컨트롤 -->
                    <div class="controls d-flex justify-content-between align-items-center mb-3">
                        <div class="dataTables_length">
                            <label>Show
                                <select id="entries-per-page" class="custom-select custom-select-sm form-control form-control-sm">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                </select> entries
                            </label>
                        </div>
                        <div class="dataTables_filter">
                            <label>검색<input type="search" id="search-input" class="form-control form-control-sm" placeholder=""></label>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-bordered" id="personnel-table" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <!-- HTML 캡처 화면의 순서와 일치 -->
                                    <th data-sort-key="joinDate" class="sortable">입사일 <span class="sort-icon"></span></th>
            						<th data-sort-key="empId" class="sortable">사원번호 <span class="sort-icon"></span></th>
            						<th data-sort-key="name" class="sortable">이름 <span class="sort-icon"></span></th>
            						<th data-sort-key="posName" class="sortable">직급 <span class="sort-icon"></span></th>
            						<th data-sort-key="deptName" class="sortable">부서 <span class="sort-icon"></span></th>
            						<th data-sort-key="phone" class="sortable">전화번호 <span class="sort-icon"></span></th>
            						<th data-sort-key="email" class="sortable">이메일 <span class="sort-icon"></span></th>
                                    <th>상세조회</th>
                                </tr>
                            </thead>
                            <tbody id="personnelTableBody">
                                <tr th:each="personnel : ${personnels}">
                                    <td th:text="${personnel.joinDate}"></td>
                                    <td th:text="${personnel.empId}"></td>
                                    <td th:text="${personnel.name}"></td>
                                    <td th:text="${personnel.posName}"></td> <!-- DTO의 posName 사용 -->
                                    <td th:text="${personnel.deptName}"></td>
                                    <td th:text="${personnel.phone}"></td>
                                    <td th:text="${personnel.email}"></td>
    								<td><a th:href="@{/personnel/detailInfo(empId=${personnel.empId})}" class="btn btn-primary btn-sm">상세조회</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div id="pagination" class="pagination-controls d-flex justify-content-end"></div>

                </div>
            </div>
        </div>
    </div>
</th:block>

<th:block layout:fragment="script">
    <script th:src="@{/personnel/js/personnel_current.js}"></script>
</th:block>
</body>
</html>