<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <!-- 개별페이지 CSS 영역 -->
    <th:block layout:fragment="style">
    </th:block>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
<link href="/personnel/css/personnel.regist.css" rel="stylesheet" type="text/css">
    
</head>
<body>
<th:block layout:fragment="content">
    <!-- Begin Page Content -->
   <section class="section">
			
				<div class="card shadow mb-4" id="empsize">
					<div class="card-header py-3">
						<h6 class="m-0 font-weight-bold">인사등록</h6>
					</div>

					<div class="card-body" id="cbody">
						<br>
						<div class="text-left regist_title">
							<h1 class="h4 text-gray-900 mb-4">
								<i class="fa-solid fa-pen"></i> 기본정보</h1>
						<button class="btn btn-primary btn-sm" id="inputData" onclick="input()">정보입력</button>
						</div>
						<form action="/personnel/registPro" method="post" enctype="multipart/form-data" id="registForm" name="registForm" >
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
							<table class="eTable">
								<tbody>
									<tr>
										<!--******************* 사진 *******************-->
										<td rowspan="3" class="text-center">
											<div class="photo-wrapper1">
												<img id="pFIle" name="pFIle" alt="">
											</div>
										</td>
										<!-- 이름 -->
										<th scope="row" class="custom-th">
											<label for="name" class="form-label">이름</label></th>
										<td colspan="3" class="custom-td">
											<input type="text" class="form-control w-75" id="name" name="name"></td>

										<!-- 전화번호 -->
										<th scope="row" class="custom-th">
											<label for="phone" class="form-label">전화번호</label></th>
										<td colspan="3" class="custom-td">
											<input type="text" class="form-control w-75" id="phone" name="phone">
											<span id="checkPhoneResult"></span>
										</td>

										<!-- 생년월일 -->
										<th scope="row" class="custom-th">
											<label for="resident" class="form-label">주민등록번호</label></th>
										<td colspan="3" class="custom-td">
											<input type="text" class="form-control w-75" id="resident" name="resident" placeholder="(ex) 990101-1111111" maxlength="14"></td>
									</tr>

									<tr>
										<!-- 성별 -->
										<th scope="row" class="custom-th">
											<label for="passwd" class="form-label">패스워드</label></th>
										<td colspan="3" class="custom-td">
											<input type="text" class="form-control w-75" id="passwd" name="passwd" placeholder="패스워드 입력" ></td>
										<!-- 이메일 -->
										<th scope="row">
											<label for="emp_em" class="form-label">이메일</label></th>
										<td colspan="3">
											<input type="text" class="form-control w-75" id="email" name="email" placeholder="aaa@naver.com">
											<span id="checkEmailResult"></span>
										</td>
										<!-- 재직현황 -->
										<th scope="row">
											<label for="emp_yn" class="form-label">재직현황</label></th>
										<td colspan="3">
											<select id="staId" name="staId" class="form-select w-75">
												<th:block th:each=" status: ${status}">
													<option th:value="${status.comDtId}" th:text="${status.comDtNm}">
												</th:block>
												
											</select>
										</td>
									</tr>
								</tbody>
								<tbody>
									<tr>
										<!-- ******************첨부파일*************************-->
										<td rowspan="3" class="text-center">
											<div class="photo-wrapper-regist">
												<input class="form-control" type="file" id="emp_pi" name="empImg" onchange="employeePhoto(event);">
											</div>
										</td>

										<!-- 부서명 -->
										<th scope="row" class="custom-th">
											<label for="dep" class="form-label">부서명</label></th>
										<td colspan="3">
											<select id="dep" name="deptId" class="form-select w-75">
												<option value="1">부서명을 선택하세요</option>
												<th:block th:each="departments : ${departments}">
													<option th:value="${departments.comDtId}" th:text="${departments.comDtNm}">
												</th:block>
											</select>
										</td>

										<!-- 직책 -->
										<th scope="row" class="custom-th">
											<label for="emp_gd" class="form-label">직책</label></th>
										<td colspan="3">
											<select id="pos" name="posId" class="form-select w-75">
												<option value="1">직책을 선택하세요</option>
												<th:block th:each="position : ${position}">
													<option th:value="${position.comDtId}" th:text="${position.comDtNm}">
												</th:block>
											</select>
										</td>
										<!-- 보안등급 	-->
									
										<th scope="row" class="custom-th">
											<label for="emp_lv" class="form-label">보안등급</label></th>
										<td colspan="3">
											<select id="level" name="levId" class="form-select w-75">
												<option value="">보안등급을 선택하세요</option>
												<th:block th:each="level : ${level}">
													<option th:value="${level.comDtId}" th:text="${level.comDtNm}">
												</th:block>
											</select>
										</td>
									
									</tr>

									<tr>
										<!-- 우편번호 -->
										<th scope="row">
											<label for="emp_pc" class="form-label">우편번호</label></th>
										<td colspan="3">
											<input type="text" class="form-control w-75" id="emp_pc" name="addrNum"></td>
										<td colspan="3">
											<button type="button" class="btn btn-primary btn-sm" id="btnSearchAddress">주소검색</button>
										</td>
									</tr>

									<tr>
										<!-- 기본주소 -->
										<th scope="row" class="custom-th">
											<label for="emp_ad" class="form-label">기본주소</label></th>
										<td colspan="3" class="custom-td">
											<input type="text" class="form-control w-75" id="emp_ad" name="addr1"></td>
										<!-- 상세주소 -->
										<th scope="row" class="custom-th">
											<label for="emp_ba" class="form-label">상세주소</label></th>
										<td colspan="3" class="custom-td">
											<input type="text" class="form-control w-75" id="emp_ba" name="addr2"></td>
											
											<th scope="row" class="custom-th-r">
											<label for="emp_hd" class="form-label">입사일</label></th>
										<td colspan="3" class="custom-td">
											<input type="date" class="form-control w-75" id="joinDate" name="joinDate"></td>
									</tr>
								</tbody>
							</table>
						
						</form>
							<br> <br>
							<div align="right">
								<button type="button" class="btn btn-primary btn-sm" onclick="history.back()">취소</button>
								<button type="submit" class="btn btn-primary btn-sm" id="registerBtn" onclick="formBtn()">등록</button>
							</div>

					</div>
					<!-- <div class="card-body"> 끝 -->
				</div>
			</section>
</th:block>

<th:block layout:fragment="script">
<!-- <script th:src="@{/bootstrap/vendor/jquery/jquery.min.js}"></script> -->
<script th:src="@{/personnel/js/personnel_regist.js}"></script>
	<script>
// 	테스트용 정보 입력 버튼
		$(document).ready(function(){
		
			$("#inputData").on("click", function(){
			
				const employeeData = {
						  name: "김둘리",
						  phone: "010-1234-5678",
						  resident: "990101-1234567",
						  passwd: "test1234",
						  email: "hong@test.com",
						  emp_pc: "12345",
						  emp_ad: "서울특별시 강남구 테헤란로",
						  emp_ba: "101동 1001호",
						  joinDate: "2025-09-26"  // yyyy-mm-dd 형식
				};
				
				// 데이터 입력
				for (let key in employeeData) {
				  const el = document.getElementById(key);
				  if (el) {
				    el.value = employeeData[key];
				    console.log(`[입력됨] ${key}: ${employeeData[key]}`);
				  } else {
				    console.warn(`[없음] id="${key}"`);
				  }
				}
			});
		});
	</script>
	 	
	

</th:block>
</body>
</html>