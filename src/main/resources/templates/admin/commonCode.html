<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
	
    <!-- 개별페이지 CSS 영역 -->
    <th:block layout:fragment="style">
<!--        <link rel="stylesheet" th:href="@{/css/item_main.css}" />-->
		<link rel="stylesheet" th:href="@{/bootstrap/css/admin/commonCode.css}" />
    </th:block>
</head>
<body>
<th:block layout:fragment="content">

	<div class="container-fluid">
		<div class="row">
			<div class="col-6">
					<div class="card shadow mb-4">
						<div class="card-header py-3 d-flex justify-content-between align-items-center" style="background-color: #f3f4f7;">
                                <h6 class="m-0 font-weight-bold">상위공통코드</h6>
							<div>
								<button type="button" class="btn btn-primary btn-sm"  data-bs-toggle="modal" data-bs-target="#commonCodeModal">등록</button>
								<button type="button" class="btn btn-secondary btn-sm" id="btnEditCode">수정</button>
								<button type="button" class="btn btn-danger btn-sm" id="btnDeleteCode">삭제</button>
							</div>
						</div>
						<div class="col-6" style="padding: 10px 0 5px 12px;">
							<div class="filterCode">
								<label for="codeSearch" class="codeSearch">검색</label>
								<input type="search" id="codeSearch" placeholder="코드/코드명" />
							</div>
						</div>
						<div class="codeContainer" style="height:600px; overflow-y:auto;">
							<div class="table-responsive">
								<table id ="bigTable" class="table table-bordered">
									<thead>
										<tr class="mainTitle">
											<th>코드</th>
											<th>코드명</th>
											<th>사용여부</th>
											<th>등록일시</th>
										</tr>
									</thead>
									<tbody id="commonTableBody">
										<tr th:each="code, iterStat : ${codes}" class="master-row" th:data-id="${code.comId}">
											<td th:text="${code.comId}"></td>
											<td th:text="${code.comNm}" class="comNm-cell"></td>
											<td th:text="${code.useYn}" class="useYn-cell"></td>
											<td th:text="${code.createdAt != null ? #temporals.format(code.createdAt, 'yyyy-MM-dd') : ''}"></td>
										</tr>
									</tbody>
								</table>
							</div>	
						</div>	
					</div>
			</div>
		  
			<div class="col-6">
				<div class="card shadow mb-4">
					<div class="card-header py-3 d-flex justify-content-between align-items-center" style="background-color: #f3f4f7;">
						<h6 class="m-0 font-weight-bold">상세공통코드</h6>
						<div>
							<button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#commonDetailModal">등록</button>
							<button class="btn btn-secondary btn-sm" id="btnEditDetail">수정</button>
							<button class="btn btn-danger btn-sm" id="btnDeleteDetail">삭제</button>
                        </div>
                     </div>
                     <div class="col-6" style="padding: 10px 0 5px 12px; display: none;">
                     	<div class="filterCode">
							<label for="codeSearch" class="codeSearch">검색</label>
							<input type="search" id="codeDetailSearch" placeholder="코드/코드명/정렬순서"/>
						</div>
					 </div>
                     <div class="card-body" id="detailArea" style="display:none; height:600px; overflow-y:auto;">
                     	<table id ="smallTable" class="table table-bordered">
							<thead>
								<tr>
									<th>코드</th>
									<th>코드명</th>
									<th>사용여부</th>
									<th>정렬순서</th>
									<th>등록일시</th>
								</tr>
							</thead>
						</table>
                     </div>
                 </div>
             </div>
		</div>	  
	</div>
	
	<!-- Modal -->
	<div class="modal fade" id="commonCodeModal" tabindex="-1" aria-labelledby="commonCodeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-sm">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="commonCodeModalLabel">공통코드 등록</h5>
				</div>
				<div class="modal-body">
					<form id="commonCodeForm" th:action="@{/admin/comRegist}" th:object="${commonCodeDTO}" method="post">
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label" style="font-size: 15px;">코드</label>
							<input type="text" th:field="*{comId}" class="form-control" id="comId" required>
						</div>
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label" style="font-size: 15px;">코드명</label>
							<input type="text" th:field="*{comNm}" class="form-control" id="comNm"  required>
						</div>
						<label for="recipient-name" class="col-form-label" style="font-size: 15px;">사용여부</label>
						<select class="useCodeAt" th:field="*{useYn}">
							<option value="Y">사용</option>
							<option value="N">미사용</option>
						</select>
						<div class="modal-footer">
							<button type="button" class="btn btn-dark btn-sm" data-bs-dismiss="modal">닫기</button>
							<button type="submit" class="btn btn-success btn-sm">저장</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	
	<!-- 상세Modal -->
	<div class="modal fade" id="commonDetailModal" tabindex="-1" aria-labelledby="commonCodeDetailModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-sm">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="commonCodeDetailModalLabel">상세공통코드 등록</h5>
				</div>
				<div class="modal-body">
					<form id="commonCodeDetailForm" th:object="${commonDetailCodeDTO}" method="post">
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label" style="font-size: 15px;">부모코드</label>
							<input type="text" th:field="*{comId}" class="form-control" id="parentComId" readonly>
						</div>
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label" style="font-size: 15px;">코드</label>
							<input type="text" th:field="*{comDtId}" class="form-control" id="comDtId">
						</div>
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label" style="font-size: 15px;">코드명</label>
							<input type="text" th:field="*{comDtNm}" class="form-control" id="comDtNm" required>
						</div>
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label" style="font-size: 15px;">정렬순서</label>
							<input type="text" th:field="*{comDtOrder}" class="form-control" id="comDtOrder" required>
						</div>
						<label for="recipient-name" class="col-form-label" style="font-size: 15px;">사용여부</label>
						<select class="useCodeAt" th:field="*{useYn}">
							<option value="Y">사용</option>
							<option value="N">미사용</option>
						</select>
						<div class="modal-footer">
							<button type="button" class="btn btn-dark btn-sm" data-bs-dismiss="modal">닫기</button>
							<button type="submit" class="btn btn-success btn-sm">저장</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	
	

   
</th:block>

<th:block layout:fragment="script">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
	<script src="https://kit.fontawesome.com/60c9dd1eea.js" crossorigin="anonymous"></script>
	<script src="/bootstrap/js/admin/commonCode.js"></script>
	<script src="/bootstrap/js/admin/commonCodeList.js"></script>
</th:block>
</body>
</html>